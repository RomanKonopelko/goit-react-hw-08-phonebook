(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{218:function(t,e,n){"use strict";n.r(e);var r,a=n(26),c=n(27),u=n(30),o=n(29),i=n(0),s=n(9),l=n(3),b=new Uint8Array(16);function f(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(b)}var m=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var p=function(t){return"string"===typeof t&&m.test(t)},h=[],d=0;d<256;++d)h.push((d+256).toString(16).substr(1));var j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(h[t[e+0]]+h[t[e+1]]+h[t[e+2]]+h[t[e+3]]+"-"+h[t[e+4]]+h[t[e+5]]+"-"+h[t[e+6]]+h[t[e+7]]+"-"+h[t[e+8]]+h[t[e+9]]+"-"+h[t[e+10]]+h[t[e+11]]+h[t[e+12]]+h[t[e+13]]+h[t[e+14]]+h[t[e+15]]).toLowerCase();if(!p(n))throw TypeError("Stringified UUID is invalid");return n};var O=function(t,e,n){var r=(t=t||{}).random||(t.rng||f)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var a=0;a<16;++a)e[n+a]=r[a];return e}return j(r)},v=n(25),g=n.n(v),y=n(1),x=function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(t=e.call.apply(e,[this].concat(c))).state={name:"",number:""},t.phonenumber=function(t){return!!t.match(/^\d{10}$/)},t.nameInputId=O(),t.numberInputId=O(),t.reset=function(){t.setState({name:"",number:""})},t.handleChange=function(e){var n=e.currentTarget,r=n.value,a=n.name;if("number"!==a||!isNaN(r)){if("name"===a){if(!r.match(/^[a-zA-Z ]+(?:\s[a-zA-Z]+)?$/)&&r.length>0)return}t.setState(Object(l.a)({},a,r))}},t.handleSubmit=function(e){return e.preventDefault(),0===t.state.name.length?alert("Write your name"):t.phonenumber(t.state.number)?(t.props.onSubmit(t.state),void t.reset()):alert("An invalid number")},t}return Object(c.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("form",{className:g.a.form,onSubmit:this.handleSubmit,children:[Object(y.jsx)("label",{htmlFor:this.nameInputId,className:g.a.label,children:"Name"}),Object(y.jsx)("input",{type:"text",id:this.nameInputId,className:g.a.input,name:"name",value:this.state.name,onChange:this.handleChange,placeholder:"your name"}),Object(y.jsx)("br",{}),Object(y.jsx)("label",{htmlFor:this.numberInputId,className:g.a.label,children:"Number"}),Object(y.jsx)("input",{type:"text",id:this.numberInputId,className:g.a.input,name:"number",value:this.state.number,onChange:this.handleChange,placeholder:"1234567890"}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{type:"submit",className:g.a.button,children:"Add contact"})]})}}]),n}(i.Component);function C(t){var e=t.id,n=t.name,r=t.number,a=t.onDeleteContact,c=t.s;return Object(y.jsxs)("li",{className:"contact",children:[n," ",r,Object(y.jsx)("button",{type:"button",onClick:a,className:c.button,children:"delete"})]},e)}var w=n(11),N=n(32),I=function(t){return t.contactsApp.loading},k=Object(N.a)([function(t){return t.contactsApp.filter},function(t){return t.contactsApp.contacts}],(function(t,e){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)||e.number.includes(t)}))})),S=n(18),A=n.n(S),D=n(22),F=n(19),L=n.n(F),R=function(t){var e=t.name,n=t.number;return function(){var t=Object(D.a)(A.a.mark((function t(r){var a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={name:e,number:n},r(Object(w.b)()),L.a.post("/contacts",a).then((function(t){var e=t.data;return r(Object(w.c)(e))})).catch((function(t){return r(Object(w.a)(t))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},V=function(t){return function(){var e=Object(D.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(Object(w.e)()),L.a.delete("/contacts/".concat(t)).then((function(){return n(Object(w.f)(t))})).catch((function(t){return n(Object(w.d)(t))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=function(){return function(){var t=Object(D.a)(A.a.mark((function t(e){var n,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(w.h)()),t.prev=1,t.next=4,L.a.get("/contacts");case 4:n=t.sent,r=n.data,e(Object(w.i)(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(Object(w.g)(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},T=Object(s.b)((function(t){return{filteredContacts:k(t),isLoading:I(t)}}),(function(t){return{onDeleteContact:function(e){return t(V(e))},getFilter:function(e){return t(w.j(e))}}}))((function(t){var e=t.getFilter,n=t.onDeleteContact,r=t.filteredContacts,a=t.isLoading;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("label",{htmlFor:"filter",children:"Search contact by number or name"}),a&&Object(y.jsx)("h2",{children:"LOADING..."}),Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"text",name:"filter",id:"filter",onChange:function(t){return e(t.currentTarget.value)}}),Object(y.jsx)("ul",{className:g.a.form,children:r.map((function(t){var e=t.id,r=t.name,a=t.number;return Object(y.jsx)(C,{id:e,name:r,number:a,onDeleteContact:function(){n(e)},s:g.a},O())}))})]})})),U=n(31),$=function(t){Object(u.a)(n,t);var e=Object(o.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchContacts()}},{key:"render",value:function(){return Object(y.jsxs)(U.a,{className:g.a.form__container,title:"Phonebook",children:[Object(y.jsx)(x,{onSubmit:this.props.onSubmit}),Object(y.jsx)(U.a,{className:g.a.list__container,title:"Contacts",children:Object(y.jsx)(T,{})})]})}}]),n}(i.Component);e.default=Object(s.b)(null,(function(t){return{onSubmit:function(e){return t(R(e))},fetchContacts:function(){return t(_())}}}))($)}}]);
//# sourceMappingURL=4.94f49250.chunk.js.map